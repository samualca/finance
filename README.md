# Personal Finance Manager (CLI)

Учебное консольное Java-приложение для управления личными финансами: доходы/расходы, бюджеты по категориям и статистика.

## Требования
- **Java 17+**

## Быстрый запуск

```bash
make run
```

Что делает:
- собирает проект (через `./mvnw clean compile`)
- запускает приложение командой:
    - `java -cp target/classes finance.Main`

### Вручную (без Makefile)
```bash
./mvnw -q clean compile
java -cp target/classes finance.Main
```

## Данные и файлы
- `data.dat` — сохранение всех пользователей и их кошельков при выходе из приложения.
- `stats.txt` — файл для вывода статистики (когда включён режим вывода stats в файл).

> Хранение в памяти во время работы, сохранение/загрузка — при выходе/старте приложения.

## Команды

### Авторизация
- `register <login> <password>` — регистрация
- `login <login> <password>` — вход
- `logout` — выход из аккаунта
- `whoami` — показать текущего пользователя

### Финансы (нужен логин)
- `income <category> <amount> [comment...]` — добавить доход
- `expense <category> <amount> [comment...]` — добавить расход
- `budget <category> <limit>` — установить бюджет на категорию расходов

Оповещения (в консоль):
- превышение бюджета по категории
- общие расходы превысили общие доходы

### Статистика (нужен логин)
- `stats` — полная статистика (общие суммы + категории + бюджеты)
- `stats income` — доходы по категориям
- `stats expense` — расходы по категориям
- `stats categories <income|expense> <cat1,cat2,...>` — сумма по нескольким категориям  
  Если категория не найдена — будет предупреждение.

### Куда выводить `stats`
Команда влияет **только** на `stats` (остальные сообщения всегда в консоль):

- `statsout` — показать текущий режим
- `statsout console` — вывод `stats` в консоль (по умолчанию)
- `statsout file [path]` — вывод `stats` в файл (по умолчанию `stats.txt`) с дописыванием (append)

## Пример сценария
```text
> register user1 123
> login user1 123
user1> income Salary 20000
user1> income Salary 40000
user1> income Bonus 3000
user1> budget Food 4000
user1> expense Food 300
user1> expense Food 500
user1> expense Entertainment 3000
user1> expense Utilities 3000
user1> expense Taxi 1500
user1> stats
```

## Что реализовано из ТЗ
- несколько пользователей, логин/пароль
- кошелёк привязан к пользователю, операции доход/расход
- бюджеты по категориям расходов
- подсчёты по всем операциям и по категориям (включая несколько выбранных)
- валидация ввода (пустые категории, некорректные суммы)
- оповещения при превышении бюджета и при расходах больше доходов
- сохранение данных при выходе и загрузка при старте
- цикл чтения команд с возможностью выхода
- вывод статистики в консоль или в файл
